# Windows 서버 생성

Experience Level: 초급
Tech Items: ACG, Server
URL: https://www.ncloud.com/guideCenter/guide/3
상태: Not started

## Windows 서버 생성

강의에서는 Linux 서버를 생성했으므로 이번에는 Windows 서버를 생성해보겠습니다. 기본적으로 윈도우 서버는 거의 이용할 일이 없겠지만, 그럼에도 일부 기업은 특정한 환경 혹은 이득을 취하기 위해서 윈도우 서버를 이용한다고 합니다. 사용해봅시다.

## 서버 생성

먼저 VPC의 콘솔에서 서버를 생성해줍니다. Linux 서버의 생성 방법과 거의 동일합니다.

![Untitled](Windows%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%A5%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20f727476076404236bc659830198afc71/Untitled.png)

**Services→Compute→Server** 란에서 **[서버 생성]** 버튼을 누르면 이와 같은 화면이 뜹니다. 기존 콘솔 창 화면과 새로운 콘솔 창 화면을 선택하라는 표시가 뜰 수도 있는데, 저는 새로운 콘솔 창 화면으로 선택했습니다. 쉬운 시작 가이드와 약간의 차이가 있을 수 있습니다.

맨 밑에 win-2019-base 서버 이미지가 보입니다. 이를 선택해줍니다.

![Untitled](Windows%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%A5%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20f727476076404236bc659830198afc71/Untitled%201.png)

VPC와 Subnet을 선택해주고, 서버 스펙을 선택합니다. 저는 가장 기본적인 Standard s2 g2로 선택했습니다. 서버 이름을 선택해주고, IP를 할당해줍니다.

이때 Essential Guide에서 10.0.1.101 근처를 사용하기에, 이보다 조금 떨어진 10.0.1.105 로 할당해두었습니다. 아니면 그냥 자동으로 할당되게끔 설정해도 됩니다.

![Untitled](Windows%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%A5%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20f727476076404236bc659830198afc71/Untitled%202.png)

리눅스 서버의 경우에는 스토리지 암호화 설정을 적용할 수 있었는데, 윈도우 서버에는 암호화 설정이 없습니다. 그리고 쉬운 시작 가이드에 의하면 Windows 서버는 부팅 디스크 크기가 100GB인 모델만 제공된다고 합니다.

![Untitled](Windows%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%A5%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20f727476076404236bc659830198afc71/Untitled%203.png)

인증키, ACG 키 선택은 Linux 서버와 동일합니다. 기존에 만들어두었던 것을 그대로 이용했습니다.

서버를 생성 중입니다. 보통 20-30분 정도 걸리니 느긋하게 커피 한 잔 하고 옵시다.

![Untitled](Windows%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%A5%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20f727476076404236bc659830198afc71/Untitled%204.png)

서버의 생성이 완료됐다면, 이제 공인 IP를 신청해서 할당해줍시다.

![Untitled](Windows%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%A5%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20f727476076404236bc659830198afc71/Untitled%205.png)

**Services→Compute→Server→Public IP→[공인 IP 신청]** 에서 window 서버를 선택하고 신청합니다.

매핑은 자동으로 됐고, 이제 제대로 서버가 작동하는 지 확인해야 합니다. MacOS에서는 이를 위해서 **Microsoft Remote Desktop** 이라는 어플리케이션을 설치해야 합니다.

![Untitled](Windows%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%A5%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20f727476076404236bc659830198afc71/Untitled%206.png)

**Add PC**를 눌러줍시다.

![Untitled](Windows%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%A5%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20f727476076404236bc659830198afc71/Untitled%207.png)

공인 IP 주소를 입력하고, User Account에 관리자 계정을 추가합니다.

이때 관리자 계정의 이름은 Administrator

비밀번호는 초기 비밀번호입니다. 이는 pem 키를 이용해서 확인할 수 있습니다(생략하겠습니다.)

![스크린샷 2023-07-06 오전 10.07.32.png](./Windows%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%A5%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20f727476076404236bc659830198afc71/Untitled9.png)

문제가 생겼습니다. 연결할 수 없다고 뜹니다(Error Code: 0x204)

사실 이 에러를 해결하려고 여러 방면으로 시도했으나, 결론적으로 해결이 되지 않았습니다.

아마 ACG 문제일 것으로 추측이 되는데, default ACG, 이전에 만든 ACG, 모든 Outbound/Inbound에 대해서 허가한 ACG 역시 사용해보았으나 문제는 계속됐습니다.

---

더 나아갈 수가 없으므로, 서버를 반납합시다.

![스크린샷 2023-07-06 오전 10.14.10.png](./Windows%20%E1%84%89%E1%85%A5%E1%84%87%E1%85%A5%20%E1%84%89%E1%85%A2%E1%86%BC%E1%84%89%E1%85%A5%E1%86%BC%20f727476076404236bc659830198afc71/Untitled10.png)

공인 IP 역시 반납해주겠습니다.

---

### 결론
아직은 NCP의 가이드에 문제가 있거나 혹은 NCP 자체에 무언가 문제가 있어 보입니다. 매끄럽지 않으므로, 나중에 다시 시도해 보겠습니다.