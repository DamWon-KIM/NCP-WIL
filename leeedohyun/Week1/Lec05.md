# Networking
외부와의 통로, 내부와의 통로 뿐만 아니라 DNS, CDN과 같은 다양한 서비스 제공
- 논리적 망 분리를 위한 VPC
- 유입되는 네트워크 트래픽을 백엔드 서버로 분기하기 위한 Load Balancer
- 네임서버 제공하는 DNS
- 요청 사용자에 가장 가까운 엣지 서버에서 캐싱 된 파일을 제공하여 원본 부하를 낮출 수 있는 CDN 상품
- Site-to-Site 연결을 위한 IPSEC VPN 상품
- 비공인 IP를 가진 다수의 서버에게 단일 공인 IP를 이용한 외부 접속을 제공하는 NAT Gateway 제공
- 글로벌 네트워크 트래픽을 백엔드 서버로 분기하기 위한 Gloabal Route Manager

# Load Balancer
부하 분산을 처리하기 위해서 서버 앞단에 존재하면서 트래픽을 여러 서버들에게 적절하게 분배시켜 주는 서비스
- 하나를 생성하면 로드 밸런서 뒷단에 서버 2개가 생성되고, 도메인에 바인딩되어 제공
- 로드밸런서는 선택한 부하 처리 성능에 따라 최대 9만 CPS까지 이용이 가능하다.
  - VPC LB/Small: 30000 CPS, Medium: 60000 CPS, Large: 90000 CPS
  - Classic LB/Max 60000 CPS까지 지원 가능
  
## 종류
- 애플리케이션 로드밸런서
- 네트워크 로드밸런서
- 네트워크 프록시 로드밸런서

## 선택 기준
![LB포털상품소개_Korean_1614661095261](https://github.com/leeedohyun/NCP-WIL/assets/116694226/c0a2f48a-1630-4707-98b9-e5cbeb1ee3d6)

## 연결 방식
- Proxy 방식 및 DSR 방식 모두 지원
- Proxy 방식에서는 클라이언트 IP를 확인하고자 할 때 별도의 설정이 필요
- 클라이언트 IP를 확인하고자 할 때, SSL/TCP일 경우에는 Proxy protocol 사용, HTTP/HTTPS일 경우 X-Forwarder 사용

## 알고리즘
- Round Robin: 클라이언트에서 요청이 오면 서버에 1개씩 분배하는 방식(가장 많이 사용)
- Least Connection: 클라이언트 연결이 제일 적은 서버에게 새로운 커넥션을 분배하는 방식
- Source IP Hash: 클라이언트 IP에 대한 해시 테이블을 가지고 클라이언트 IP에 매핑되는 서버에 새로운 커넥션을 분배하는 방식

원하는 알고리즘을 선택해서 이용하면 된다.

## 생성 후 설정 가능 내용
- HTTP Keep Alive On/Off(Defaulf Off)
- Connection Idle Time(Default: 60 Sec)

로드밸런서를 만든 후에 설정이 가능하다.

# DNS
도메인을 판매하지는 않지만 보유하고 있는 도메인을 네이버 클라우드 플랫폼의 리소스와 매핑할 수 있도록 도와주는 서비스

- 다양한 레코드 타입 지원
- 등록 도메인으로 인입되는 트래픽을 분기
- 등록된 도메인에 대한 헬스 체크 불가

# CDN+ / GCDN
CDN은 컨텐츠를 Caching하여 보다 빠르고 안정적으로 사용자에게 전송하는 서비스이다. 어떻게 빠르게 제공될까?
처음 클라이언트가 요청하면 원 서버에서 접근하지만 그 이후에는 캐시 서버에 저장해놓는다. 이후에 클라이언트가 동일한 컨텐츠에 접근하면 원 서버에 접근하지 않고 캐시 서버에 접근하여 더 빠르게 제공한다.

- CDN+: 국내 전용, GCDN: 국외 전용
- 원본은 NCP 오브젝트 스토리지 혹은 커스텀 오리진 서버를 둘 수 있음
- 도메인은 랜덤 CDN 도메인(*.ntruss.com) 혹은 보유하고 있는 도메인 사용 가능
- 지원 프로토콜은 HTTP/S

## CDN은 언제 필요할까?
- 대규모 파일 배포나 이미지 서비스, 동영상 서비스 등 대규모로 트래픽이 발생하는 경우
- 웹 서버를 통해 배포하게 되면 웹 서버의 용량이 기하 급수적으로 커져야 함.
- 이러한 대규모 트래픽에 효과적으로 대응하기 위한 서비스

# IPSEC VPN
사내 망과 네이버 클라우드 플랫폼의 망을 망대망으로 연결할 수 있도록 도와주는 서비스

- 고객의 VPN 장비와 NCP VPN 장비 간 터널링 연결 제공(통신 방식 호환이 되어야 함)
- NCP 서버들은 Private Subnet 대역(192.168.x.x)으로 통신 필요
- BW 최대 30Mbps 제공

# NAT Gateway
비공인 IP를 가진 많은 vm들이 나트 게이트웨이가 가진 공인 IP를 공유할 수 있도록 도와주는 서비스

- 비공인 IP를 가진 다수의 서버에게 대표 공인 IP를 이용한 외부 접속을 제공
  - NAT Gateway를 통해 외부로 접속할 때 사용되는 대표 공인 IP는 해당   - NAT Gateway만 독점적으로 사용하는 IP
  - Autoscaling과 연계된 자동 설정 제공
  - 보안상 다수의 공인 IP에 대한 ACL을 오픈할 수 없는 경우 혹은 공인 IP 생성 비용 절약 가능
  
# Global Route Manger
로드밸런서와 비슷하다. 다른 점은 로드밸런서를 이용하면 하나의 리전 안에 있는 vm들에게 분배를 해주고, Global Route Manger는 여러 리전으로 로드밸런싱을 도와준다.

- DNS 기반의 로드밸런싱 서비스 제공을 통해서 지역별 트래픽 기반 부하 분산, DR 구축 등에 사용할 수 있는 상품
- 로드밸런싱 타입은 4가지 제공(Round Robin, Weighted, GeoLocation, Failover)
- IP에 대한 Health Check만 제공
